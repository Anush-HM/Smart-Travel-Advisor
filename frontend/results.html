<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Travel Overview</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-white">
<section class="py-24 text-center px-6">
  <h1 id="cityName" class="text-5xl md:text-6xl font-extrabold bg-clip-text text-transparent bg-gradient-to-r from-teal-400 to-sky-400">
    Destination
  </h1>
  <p class="mt-4 text-gray-300">Smart travel insights for your destination</p>
</section>
<section class="max-w-7xl mx-auto px-6 grid grid-cols-1 md:grid-cols-2 gap-6 pb-24">
  <div class="glass-card">
  ğŸŒ¦ï¸
  <h3 class="title">Weather Intelligence</h3>
  <div id="weatherInfo"><p>Loading weather...</p></div>
  <div id="forecastInfo" class="mt-4 flex justify-between gap-2"></div>
</div>
  <div class="glass-card">
    ğŸ›¡ï¸
    <h3 class="title">Safety Advisory</h3>
    <div id="safetyTips"><p>Loading...</p></div>
  </div>
  <div class="glass-card">
    ğŸ’
    <h3 class="title">Packing Suggestions</h3>
    <div id="packingTips"><p>Loading...</p></div>
  </div>
  <div class="glass-card">
    ğŸš‘
    <h3 class="title">Emergency Tips</h3>
    <div id="emergencyTips"><p>Loading...</p></div>
  </div>
</section>
<section class="text-center pb-20">
  <a id="chatLink" href="chatbot.html" class="inline-block px-8 py-4 rounded-xl bg-gradient-to-r from-teal-500 to-sky-500 hover:scale-105 transition cursor-pointer">
    ğŸ’¬ Chat with TripMate
  </a>
</section>
<style>
  .glass-card {
    background: rgba(255, 255, 255, 0.08);
    backdrop-filter: blur(14px);
    border: 1px solid rgba(255, 255, 255, 0.15);
    padding: 1.75rem;
    border-radius: 1.5rem;
    transition: transform 0.3s ease;
  }
  .glass-card:hover { transform: translateY(-6px); }
  .title { font-size: 1.3rem; font-weight: 600; margin-top: 0.5rem; }
</style>
<script src="js/safety.js"></script>
<script src="js/packing.js"></script>
<script src="js/emergency.js"></script>
<script>
window.onload = function() {
  let city = new URLSearchParams(window.location.search).get("place");
  if (!city) {
    document.getElementById("weatherInfo").innerHTML = "<p style='color:red;'>No destination selected</p>";
    return;
  }
  city = city.split(":")[0].trim();
  document.getElementById("chatLink").href = `chatbot.html?place=${city}`;
  document.getElementById("cityName").innerText = city;
  fetch("http://127.0.0.1:5000/api/weather?city=" + encodeURIComponent(city))
    .then(function(response) { return response.json(); })
    .then(function(data) {
      document.getElementById("weatherInfo").innerHTML =
        "<p>ğŸŒ¡ <strong>Temperature:</strong> " + data.temperature + "Â°C</p>" +
        "<p>â˜€ <strong>Condition:</strong> " + data.condition + "</p>" +
        "<p>ğŸ’§ <strong>Humidity:</strong> " + data.humidity + "%</p>" +
        "<p>ğŸŒ¬ <strong>Wind:</strong> " + data.wind + " m/s</p>";

      // âœ… ADDED: 5-day forecast display
      if (data.forecast) {
        const days = data.forecast.map(day => {
          const date = new Date(day.date);
          const dayName = date.toLocaleDateString("en-US", { weekday: "short" });
          return `
            <div class="text-center flex-1 bg-white/10 rounded-xl p-2">
              <p class="text-xs font-bold">${dayName}</p>
              <p class="text-sm">${Math.round(day.temp)}Â°C</p>
              <p class="text-xs text-gray-300">${day.condition}</p>
            </div>
          `;
        }).join("");
        document.getElementById("forecastInfo").innerHTML = days;
      }

      loadSafetyInfo(city, data.avgTemp, data.avgCondition);
loadPackingInfo(city, data.avgTemp, data.avgCondition);
loadEmergencyInfo(city, data.avgTemp, data.avgCondition);
    })
    .catch(function(error) {
      document.getElementById("weatherInfo").innerHTML = "<p style='color:red;'>" + error.message + "</p>";
    });
}
</script>
</body>
</html>